{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4 text-uppercase">
    <h4 class="fw-bold text-primary">RINCIAN DATA JUAL (SEMUA DATA)</h4>
    <div class="btn-group shadow-sm">
        <a href="?filter=semua" class="btn btn-dark btn-sm {% if filter_aktif=='semua' %}active{% endif %}">TAMPIL SEMUA</a>
        <a href="?filter=minggu" class="btn btn-dark btn-sm {% if filter_aktif=='minggu' %}active{% endif %}">MINGGU INI</a>
        <a href="?filter=bulan" class="btn btn-dark btn-sm {% if filter_aktif=='bulan' %}active{% endif %}">BULAN INI</a>
    </div>
</div>

<div class="card bg-success text-white p-3 mb-4 text-center shadow border-0">
    <h6 class="opacity-75">TOTAL OMSET DARI LIST DI BAWAH:</h6>
    <h2 class="fw-bold">Rp {{ "{:,.0f}".format(total_omzet) }}</h2>
</div>

<div class="card border-0 shadow-sm overflow-hidden">
    <table class="table table-hover align-middle mb-0 text-center text-uppercase" style="font-size: 11px;">
        <thead class="table-dark">
            <tr>
                <th>HARI / TANGGAL / WAKTU</th>
                <th class="text-start ps-4">BARANG</th>
                <th>QTY (LS/PCS)</th>
                <th>OMSET</th>
                <th>AKSI</th>
            </tr>
        </thead>
        <tbody>
            {% for p in penjualan %}
            <tr>
                <td class="fw-bold text-muted">{{ p.tanggal_transaksi.strftime('%A, %d/%m/%Y %H:%M') }}</td>
                <td class="text-start ps-4 fw-bold text-dark">{{ p.nama_barang }}</td>
                <td>{{ p.jumlah_ls }}L + {{ p.jumlah_pcs }}P</td>
                <td class="text-primary fw-bold">Rp {{ "{:,.0f}".format(p.total_omzet) }}</td>
                <td>
                    <div class="btn-group">
                        <a href="/edit_penjualan/{{ p.id }}" class="btn btn-sm btn-warning fw-bold">EDIT</a>
                        <a href="/hapus_penjualan/{{ p.id }}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Hapus transaksi ini?')">X</a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}